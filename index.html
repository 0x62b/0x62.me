<!doctype html>
<html>
  <head>
    <title>0x62</title>
    <link rel="stylesheet" type="text/css" href="/static/css/main.css"/>
    <link rel="stylesheet" type="text/css" href="/static/css/term.css"/>
    <script src="/static/js/parser.js"></script>
    <script>
      function getBrowser() {
        const userAgent = navigator.userAgent;
        if (userAgent.includes("Chrome") && !userAgent.includes("Edg")) {
            return "Google Chrome";
        } else if (userAgent.includes("Firefox")) {
            return "Mozilla Firefox";
        } else if (userAgent.includes("Safari") && !userAgent.includes("Chrome")) {
            return "Safari";
        } else if (userAgent.includes("Edg")) {
            return "Microsoft Edge";
        } else if (userAgent.includes("Opera") || userAgent.includes("OPR")) {
            return "Opera";
        } else if (userAgent.includes("Trident") || userAgent.includes("MSIE")) {
            return "Internet Explorer";
        } else {
            return "Unknown";
        }
      }

      document.addEventListener("DOMContentLoaded", async function() {
        document.getElementById("term-input").addEventListener("submit", async function(e) {
          e.preventDefault();
          await command();
        });

        document.getElementById("ipaddr").innerText = await (await fetch("https://myexternalip.com/raw")).text();
        document.getElementById("browser").innerText = getBrowser();

        const popup = document.getElementById("term-embed");
        const iframe = document.getElementById("term-iframe");

        window.closePopup = function() {
          popup.style.display = "none";
          document.getElementById("cmd-input").focus();
        }

        document.addEventListener("keydown", function(e) {
          if (getComputedStyle(popup).display !== "none" && e.key === "q") {
            e.preventDefault();
            window.closePopup();
          }
        });
      });
      
      document.addEventListener("click", function() {
        document.getElementById("cmd-input").focus();
      })
    </script>
    <script>
      setTimeout(() => {
        Array.from(document.getElementsByClassName("delay-1")).forEach(a => {
          a.hidden = false;
        });
      }, 1067);

      setTimeout(() => {
        Array.from(document.getElementsByClassName("delay-2")).forEach(a => {
          a.hidden = false;
        });
      }, 1670);

      setTimeout(() => {
        Array.from(document.getElementsByClassName("delay-3")).forEach(a => {
          a.hidden = false;
        });
      }, 2067);

      setTimeout(() => {
        Array.from(document.getElementsByClassName("delay-4")).forEach(a => {
          a.hidden = false;
        });
      }, 2467);

      setTimeout(() => {
        Array.from(document.getElementsByClassName("delay-5")).forEach(a => {
          a.hidden = false;
        });
        document.getElementById("cmd-input").focus();
      }, 3041);
    </script>
  </head>
  <body>
    <div id="term-output">
      <span class="delay-1" hidden>[ <span class="text-green">OK</span> ] Filesystem Mount.</span>
      <br/>
      <span class="delay-2" hidden>[ <span class="text-red">FAILED</span> ] Show Graphical Interface failed.</span>
      <br/>
      <span class="delay-3" hidden>[ <span class="text-green">OK</span> ] Initialise system.</span>
      <br/>
      <span class="delay-4" hidden>[ <span class="text-green">OK</span> ] Reached target System Startup.</span>
      <br/><br/>
      <div class="delay-5" hidden>
        _________________________________________<br/><br/>
        0x62-OS v0.1<br/>
        <span class="text-green">IP: </span><span id="ipaddr"></span>
        <br/>
        <span class="text-green">Browser: </span><span id="browser"></span>
        <br/>
        <span class="text-green">GitHub: </span><a href="https://github.com/0x62b/0x62.me" target="_blank">https://github.com/0x62b/0x62.me</a>
        <br/>
        _________________________________________
        <br/><br/>
        <span class="text-yellow">Welcome. For a list of available commands, type 'help' or '?'.</span>
        <br/>
      </div>
    </div>
    <form id="term-input" class="delay-5" hidden>
      visitor@0x62.me: <span class="text-green">~</span> $
      <input type="text" id="cmd-input" autocomplete="off" autofocus/>
    </form>
    <div class="popup" id="term-embed">
      <iframe id="term-iframe"></iframe>
    </div>
  </body>
</html>